<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>jQuery拖拽功能-jq22.com</title>
<script src="https://libs.baidu.com/jquery/1.11.3/jquery.min.js"></script>
<style>
* {
	margin:0;
	padding:0;
}
.box {
	width:400px;
	height:400px;
	border:1px solid #000000;
	margin:60px auto;
	position:relative;
}
.box-small {
	width:100px;
	height:100px;
	background:#005CAF;
	cursor:pointer;
	position:absolute;
	top:0;
	left:0;
	background-image:linear-gradient(red,orange,yellow,green,blue,indigo,violet);
	border-radius:50%;
}
</style>
</head>
<body>
<div class="box">
    <div class="box-small"></div>
</div>

<script>
$('.box-small').mousedown(function(e) {
    var x = e.pageX - $(this).offset().left + $('.box').offset().left;
    var y = e.pageY - $(this).offset().top + $('.box').offset().top;
    $(document).mousemove(function(e) {
        var disX = e.pageX - x;
        var disY = e.pageY - y;
        var w = $('.box').width() - $('.box-small').width();
        var h = $('.box').height() - $('.box-small').height();
        if (disX <= 0) {
            disX = 0
        }
        if (disX >= w) {
            disX = w;
        }
        if (disY <= 0) {
            disY = 0
        }
        if (disY >= h) {
            disY = h;
        }
        $('.box-small').css({
            top: disY + 'px',
            left: disX + 'px'
        })
    });
});

$(document).mouseup(function(e) {
    $(document).off('mousemove');
});
</script>

</body>
</html>
